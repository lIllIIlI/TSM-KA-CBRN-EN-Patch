<?xml version='1.0' encoding='utf-8'?>
<Randomevents>
  <Override>
  <EventPrefabs>
    
    <ScriptedEvent identifier="tsmmission_indestructible_wall">
      
      <TagAction criteria="structureidentifier:ff_x_wall" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:ff_y_wall" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshella25" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshella26" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshellaglassd" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshellaglasse" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshellaglassf" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:topwindow" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:verticalwindow" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      
      <TagAction criteria="structureidentifier:icewall" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:icewall90" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      
      <TagAction criteria="structureidentifier:ff_x_wall_wrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshella07wrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshella21wrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshella23wrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:shella26degwrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshellaglassdwrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshellaglassewrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshellaglassfwrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="targetwall">
        <StatusEffect target="This" indestructible="true" />
      </StatusEffectAction>
    </ScriptedEvent>
    
    <ScriptedEvent identifier="tsm_wz_ff_event" commonness="100">
      <TagAction criteria="player" tag="player" />
      <SpawnAction npcsetidentifier="tsm_city_npcs" npcidentifier="tsm_wz_ff" targettag="tsm_wz_ff" spawnlocation="Outpost" targetmoduletags="airlock" />
      <StatusEffectAction targettag="tsm_wz_ff">
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
      <Label name="beginningofthejourney" />
      <NPCWaitAction npctag="tsm_wz_ff" wait="false" />
      <TriggerAction target1tag="tsm_wz_ff" target2tag="player" applytotarget2="triggerer_player" radius="200" waitforinteraction="true" />
      <ConversationAction targettag="triggerer_player" text="[tsm.tl1]">
        <Option text="[tsm.tl2]">
          <ConversationAction targettag="triggerer_player" text="[tsm.tl3]">
            <Option text="[tsm.tl4]">
              <CheckItemAction targettag="triggerer_player" itemidentifiers="tsm_identifier" amount="1">
                <Success>
                  <RemoveItemAction targettag="triggerer_player" identifier="tsm_identifier" amount="1" />
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl5]" />
                  <SpawnAction itemidentifier="tsm_wz_cl_flare" targetinventory="triggerer_player" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Success>
                <Failure>
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl6]" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Failure>
              </CheckItemAction>
            </Option>
            <Option text="[tsm.tl7]">
              <CheckItemAction targettag="triggerer_player" itemidentifiers="tsm_identifier" amount="1">
                <Success>
                  <RemoveItemAction targettag="triggerer_player" identifier="tsm_identifier" amount="1" />
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl8]" />
                  <SpawnAction itemidentifier="tsm_wz_yl_flare" targetinventory="triggerer_player" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Success>
                <Failure>
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl9]" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Failure>
              </CheckItemAction>
            </Option>
            <Option text="[tsm.tl10]">
              <CheckItemAction targettag="triggerer_player" itemidentifiers="tsm_identifier" amount="1">
                <Success>
                  <RemoveItemAction targettag="triggerer_player" identifier="tsm_identifier" amount="1" />
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl11]" />
                  <SpawnAction itemidentifier="tsm_pgcflare" targetinventory="triggerer_player" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Success>
                <Failure>
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl12]" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Failure>
              </CheckItemAction>
            </Option>
            <Option text="[tsm.tl13]">
              <ConversationAction text="[tsm.tl14]" dialogtype="Small" targettag="triggerer_player" />
              <ClearTagAction tag="triggerer_player" />
              <GoTo name="beginningofthejourney" />
            </Option>
          </ConversationAction>
        </Option>
        <Option text="[tsm.tl15]">
          <ConversationAction targettag="triggerer_player" text="[tsm.tl16]">
            <Option text="[tsm.tl17]">
              <CheckReputationAction targettype="faction" identifier="tsm" condition="gte 25">
                <Success>
                  <ReputationAction targettype="Faction" identifier="tsm" increase="-3" />
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl18]" />
                  <SpawnAction itemidentifier="tsm_wz_cl_flare" targetinventory="triggerer_player" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Success>
                <Failure>
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl19]" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Failure>
              </CheckReputationAction>
            </Option>
            <Option text="[tsm.tl20]">
              <CheckReputationAction targettype="faction" identifier="tsm" condition="gte 25">
                <Success>
                  <ReputationAction targettype="Faction" identifier="tsm" increase="-3" />
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl21]" />
                  <SpawnAction itemidentifier="tsm_wz_yl_flare" targetinventory="triggerer_player" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Success>
                <Failure>
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl22]" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Failure>
              </CheckReputationAction>
            </Option>
            <Option text="[tsm.tl23]">
              <CheckReputationAction targettype="faction" identifier="tsm" condition="gte 25">
                <Success>
                  <ReputationAction targettype="Faction" identifier="tsm" increase="-2" />
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl24]" />
                  <SpawnAction itemidentifier="tsm_pgcflare" targetinventory="triggerer_player" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Success>
                <Failure>
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl25]" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Failure>
              </CheckReputationAction>
            </Option>
            <Option text="[tsm.tl26]">
              <ConversationAction text="[tsm.tl27]" dialogtype="Small" targettag="triggerer_player" />
              <ClearTagAction tag="triggerer_player" />
              <GoTo name="beginningofthejourney" />
            </Option>
          </ConversationAction>
        </Option>
        <Option text="[tsm.tl28]">
          <ConversationAction text="[tsm.tl29]" dialogtype="Small" targettag="triggerer_player" />
          <ClearTagAction tag="triggerer_player" />
          <GoTo name="beginningofthejourney" />
        </Option>
      </ConversationAction>
      <NPCWaitAction npctag="tsm_wz_ff" wait="false" />
    </ScriptedEvent>
    
    <ScriptedEvent identifier="tsm_wz_ff_event_xbz" commonness="100">
      <TagAction criteria="player" tag="player" />
      <SpawnAction npcsetidentifier="tsm_city_npcs" npcidentifier="tsm_wz_ff_xbz" targettag="tsm_wz_ff_xbz" spawnpointtag="saferoom" spawnlocation="beaconstation" requirespawnpointtag="true" teamid="FriendlyNPC" />
      <Label name="beginningofthejourney" />
      <NPCWaitAction npctag="tsm_wz_ff_xbz" wait="false" />
      <TriggerAction target1tag="tsm_wz_ff_xbz" target2tag="player" applytotarget2="triggerer_player" radius="200" waitforinteraction="true" />
      <ConversationAction targettag="triggerer_player" text="[tsm.tl30]">
        <Option text="[tsm.tl31]">
          <ConversationAction targettag="triggerer_player" text="[tsm.tl32]">
            <Option text="[tsm.tl33]">
              <CheckItemAction targettag="triggerer_player" itemidentifiers="tsm_identifier" amount="1">
                <Success>
                  <RemoveItemAction identifier="tsm_identifier" />
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl34]" />
                  <SpawnAction itemidentifier="tsm_wz_cl_flare" targetinventory="triggerer_player" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Success>
                <Failure>
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl35]" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Failure>
              </CheckItemAction>
            </Option>
            <Option text="[tsm.tl36]">
              <CheckItemAction targettag="triggerer_player" itemidentifiers="tsm_identifier" amount="1">
                <Success>
                  <RemoveItemAction identifier="tsm_identifier" />
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl37]" />
                  <SpawnAction itemidentifier="tsm_wz_yl_flare" targetinventory="triggerer_player" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Success>
                <Failure>
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl38]" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Failure>
              </CheckItemAction>
            </Option>
            <Option text="[tsm.tl39]">
              <CheckItemAction targettag="triggerer_player" itemidentifiers="tsm_identifier" amount="1">
                <Success>
                  <RemoveItemAction identifier="tsm_identifier" />
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl40]" />
                  <SpawnAction itemidentifier="tsm_pgcflare" targetinventory="triggerer_player" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Success>
                <Failure>
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl41]" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Failure>
              </CheckItemAction>
            </Option>
            <Option text="[tsm.tl42]">
              <ConversationAction text="[tsm.tl43]" dialogtype="Small" targettag="triggerer_player" />
              <ClearTagAction tag="triggerer_player" />
              <GoTo name="beginningofthejourney" />
            </Option>
          </ConversationAction>
        </Option>
        <Option text="[tsm.tl44]">
          <ConversationAction targettag="triggerer_player" text="[tsm.tl45]">
            <Option text="[tsm.tl46]">
              <CheckReputationAction targettype="faction" identifier="tsm" condition="gte 25">
                <Success>
                  <ReputationAction targettype="Faction" identifier="tsm" increase="-3" />
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl47]" />
                  <SpawnAction itemidentifier="tsm_wz_cl_flare" targetinventory="triggerer_player" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Success>
                <Failure>
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl48]" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Failure>
              </CheckReputationAction>
            </Option>
            <Option text="[tsm.tl49]">
              <CheckReputationAction targettype="faction" identifier="tsm" condition="gte 25">
                <Success>
                  <ReputationAction targettype="Faction" identifier="tsm" increase="-3" />
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl50]" />
                  <SpawnAction itemidentifier="tsm_wz_yl_flare" targetinventory="triggerer_player" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Success>
                <Failure>
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl51]" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Failure>
              </CheckReputationAction>
            </Option>
            <Option text="[tsm.tl52]">
              <CheckReputationAction targettype="faction" identifier="tsm" condition="gte 25">
                <Success>
                  <ReputationAction targettype="Faction" identifier="tsm" increase="-2" />
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl53]" />
                  <SpawnAction itemidentifier="tsm_pgcflare" targetinventory="triggerer_player" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Success>
                <Failure>
                  <ConversationAction targettag="triggerer_player" text="[tsm.tl54]" />
                  <ClearTagAction tag="triggerer_player" />
                  <GoTo name="beginningofthejourney" />
                </Failure>
              </CheckReputationAction>
            </Option>
            <Option text="[tsm.tl55]">
              <ConversationAction text="[tsm.tl56]" dialogtype="Small" targettag="triggerer_player" />
              <ClearTagAction tag="triggerer_player" />
              <GoTo name="beginningofthejourney" />
            </Option>
          </ConversationAction>
        </Option>
        <Option text="[tsm.tl57]">
          <ConversationAction text="[tsm.tl58]" dialogtype="Small" targettag="triggerer_player" />
          <ClearTagAction tag="triggerer_player" />
          <GoTo name="beginningofthejourney" />
        </Option>
      </ConversationAction>
      <NPCWaitAction npctag="tsm_wz_ff" wait="false" />
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_wz_ff_event_xbz_ab" commonness="100">
      <SpawnAction npcsetidentifier="tsm_outpost_combat_npcs" npcidentifier="tsm_outpost_combat_npc_a" targettag="tsm_outpost_combat_npc_a" spawnpointtag="saferoom" spawnlocation="beaconstation" requirespawnpointtag="true" teamid="FriendlyNPC" />
    </ScriptedEvent>
    
    <ScriptedEvent identifier="tsmmission_sundown_buff">
      <TagAction criteria="humanprefabidentifier:tsm_outpost_combat_npc" tag="security" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_outpost_combat_npc_a" tag="security" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:rapidreaction_elite_p" tag="security" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_outpost_combat_npc_j" tag="security" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_gendarmerie" tag="security" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="security">
        <StatusEffect target="This">
          <Affliction identifier="tsmmission_ai_stun" strength="50" />
          <Affliction identifier="tsmmission_eyi_rev" strength="50" />
          <Affliction identifier="tsmmission_eyi_defend" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    
    <ScriptedEvent identifier="tsm_offer_reward_1" commonness="100">
      <SpawnAction npcsetidentifier="tsm_city_npcs" npcidentifier="tsm_bountyhunter" targettag="missionnpc" spawnlocation="Outpost" spawnpointtype="Path" />
      <ConversationAction text="EventText.missionevent_cargo.c1" speakertag="missionnpc" endeventifinterrupted="false" dialogtype="Small" />
      <MissionAction missiontag="tsm_origin1" />
      <MissionAction missiontag="tsm_origin1" />
      <MissionAction missiontag="tsm_origin1" />
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_offer_reward_2" commonness="100">
      <SpawnAction npcsetidentifier="tsm_city_npcs" npcidentifier="tsm_bountyhunter" targettag="missionnpc" spawnlocation="Outpost" spawnpointtype="Path" />
      <ConversationAction text="EventText.missionevent_cargo.c1" speakertag="missionnpc" endeventifinterrupted="false" dialogtype="Small" />
      <MissionAction missiontag="tsm_origin" />
      <MissionAction missiontag="tsm_origin" />
      <MissionAction missiontag="tsm_origin" />
      <MissionAction missiontag="tsm_origin" />
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_offer_reward_3" commonness="100">
      <SpawnAction npcsetidentifier="tsm_city_npcs" npcidentifier="tsm_bountyhunter" targettag="missionnpc" spawnlocation="Outpost" spawnpointtype="Path" />
      <ConversationAction text="EventText.missionevent_cargo.c1" speakertag="missionnpc" endeventifinterrupted="false" dialogtype="Small" />
      <MissionAction missiontag="tsm_abyss" />
      <MissionAction missiontag="tsm_hunt_monster_cave" />
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_offer_reward_4" commonness="100">
      <SpawnAction npcsetidentifier="tsm_city_npcs" npcidentifier="tsm_outpostmanager" targettag="missionnpc" spawnlocation="Outpost" spawnpointtype="Path" />
      <ConversationAction text="EventText.missionevent_cargo.c1" speakertag="missionnpc" endeventifinterrupted="false" dialogtype="Small" />
      <MissionAction missiontag="tsm_abyss_d" />
      <MissionAction missiontag="tsm_abyss" />
      <MissionAction missiontag="tsm_hunt_monster" />
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_missionevent_hxl" commonness="10">
      <TagAction criteria="player" tag="player" />
      <SpawnAction npcsetidentifier="tsmnpc" npcidentifier="tsmnpc_1" targettag="tsmnpc_1" spawnlocation="Outpost" targetmoduletags="airlock" />
      <StatusEffectAction targettag="tsmnpc_1">
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
      <NPCWaitAction npctag="tsmnpc_1" wait="false" />
      <TriggerAction target1tag="tsmnpc_1" target2tag="player" applytotarget2="triggerer_player" radius="200" waitforinteraction="true" />
      <ConversationAction targettag="triggerer_player" speakertag="tsmnpc_1" text="[tsm.tl59]" eventsprite="hxl">
        <Option text="[tsm.tl60]">
          <ConversationAction text="[tsm.tl61]" dialogtype="Small" targettag="triggerer_player" eventsprite="hxl">
            <Option text="[tsm.tl62]">
              <ConversationAction text="……" endeventifinterrupted="false" dialogtype="Small" eventsprite="hxl" />
              <ConversationAction text="[tsm.tl63]" endeventifinterrupted="false" dialogtype="Small" eventsprite="hxl">
                <Option text="[tsm.tl64]">
                  <ConversationAction text="[tsm.tl65]" endeventifinterrupted="false" dialogtype="Small" eventsprite="hxl" />
                  <MissionAction missiontag="tsm_origin" />
                  <MissionAction missiontag="tsm_origin" />
                  <MissionAction missiontag="tsm_origin" />
                  <MissionAction missiontag="tsm_hunt_monster" />
                  <NPCWaitAction npctag="tsmnpc_1" wait="false" />
                </Option>
              </ConversationAction>
            </Option>
          </ConversationAction>
        </Option>
      </ConversationAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_missionevent_jlp" commonness="50">
      <TagAction criteria="player" tag="player" />
      <SpawnAction npcsetidentifier="tsmnpc" npcidentifier="tsmnpc_7" targettag="tsmnpc_7" spawnlocation="Outpost" targetmoduletags="airlock" />
      <Label name="beginningofthejourney" />
      <NPCWaitAction npctag="tsmnpc_7" wait="false" />
      <TriggerAction target1tag="tsmnpc_7" target2tag="player" applytotarget2="triggerer_player" radius="200" waitforinteraction="true" />
      <ConversationAction targettag="triggerer_player" text="tsm.a8">
        <Option text="tsm.a81">
          <ConversationAction targettag="triggerer_player" dialogtype="Small" text="tsm.a82">
            <Option text="tsm.a83">
              <ConversationAction text="tsm.a84" dialogtype="Small" targettag="triggerer_player" />
              <MissionAction missiontag="tsm8" />
            </Option>
          </ConversationAction>
        </Option>
        <Option text="tsm.a8a">
          <ConversationAction targettag="triggerer_player" text="tsm.a8b">
            <Option text="tsm.a8c" endconversation="true">
              <ConversationAction targettag="triggerer_player" text="tsm.a8d" endconversation="true" />
              <WaitAction time="3" />
              <SpawnAction speciesname="adventists_heavy" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists_heavy" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists_heavy" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists_heavy" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="adventists" spawnlocation="Outpost" />
            </Option>
          </ConversationAction>
        </Option>
        <Option text="tsm.b8" endconversation="false">
          <ConversationAction text="...." targettag="triggerer_player" />
          <GoTo name="beginningofthejourney" />
        </Option>
      </ConversationAction>
      <NPCWaitAction npctag="tsmnpc_7" wait="false" />
    </ScriptedEvent>
    
    <ScriptedEvent identifier="tsm_combat_ship_event">
      <TagAction criteria="crew" tag="crew" />
      <TagAction criteria="bot" tag="bot" />
      <Label name="waitforspotting" />
      <WaitAction time="1" />
      <CheckVisibilityAction entitytag="bot" excludedentitytag="crew" targettag="crew" />
      <WaitAction time="3" />
      <ConversationAction text="[tsm.tl66]" dialogtype="Small" />
      <WaitAction time="30" />
      <ConversationAction text="[tsm.tl67]" dialogtype="Small" />
    </ScriptedEvent>
    
    <ScriptedEvent identifier="tsm_outpost_invasions_coalition" commonness="100">
      <TagAction criteria="player" tag="player" />
      <TagAction criteria="crew" tag="sound" />
      <SpawnAction npcsetidentifier="tsm_mission_npcs" npcidentifier="tsm_coalition_spy" targettag="tsm_coalition_spy" spawnlocation="Outpost" targetmoduletags="airlock" />
      <Label name="beginningofthejourney" />
      <NPCWaitAction npctag="tsm_coalition_spy" wait="true" />
      <TriggerAction target1tag="tsm_coalition_spy" target2tag="player" applytotarget2="triggerer_player" radius="200" waitforinteraction="true" />
      <ConversationAction targettag="triggerer_player" text="[tsm.tl68]">
        <Option text="[tsm.tl69]">
          <ConversationAction targettag="triggerer_player" text="[tsm.tl70]">
            <Option text="[tsm.tl71]" endconversation="true">
              <ReputationAction targettype="Faction" identifier="coalition" increase="4" />
              <ReputationAction targettype="Faction" identifier="tsm" increase="-3" />
              <WaitAction time="3" />
              <ConversationAction targettag="sound" text="[tsm.tl72]" endconversation="true" />
              <StatusEffectAction targettag="sound">
                <StatusEffect target="This">
                  <Sound file="%ModDir%/Sounds/tsm_alert.ogg" range="10000" dontmuffle="true" />
                </StatusEffect>
              </StatusEffectAction>
              <WaitAction time="3" />
              <SpawnAction speciesname="QuickReactionForce" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce1" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce1" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce1" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce1" spawnlocation="Outpost" />
              <WaitAction time="0.1" />
              <SpawnAction speciesname="QuickReactionForce1" spawnlocation="Outpost" />
            </Option>
          </ConversationAction>
        </Option>
      </ConversationAction>
      <NPCWaitAction npctag="tsm_coalition_spy" wait="false" />
    </ScriptedEvent>
    
    
    <ScriptedEvent identifier="tsm_unlockpathcoldcaverns" commonness="1" unlockpathevent="true" unlockpathtooltip="lockedpathtooltiptsmreputation" unlockpathreputation="30" faction="tsm" biome="coldcaverns">
      <SpawnAction npcsetidentifier="tsm_city_npcs" npcidentifier="tsm_caretakers" targettag="unlockpathnpc" spawnlocation="Outpost" spawnpointtag="unlockpath" />
      <CheckReputationAction targettype="faction" identifier="tsm" condition="gte 30">
        <Success>
          <ConversationAction text="EventText.unlockpathcoldcaverns.tsmc1" speakertag="unlockpathnpc" dialogtype="Regular" />
          <UnlockPathAction />
        </Success>
        <Failure>
          <Label name="retry" />
          <ConversationAction text="EventText.unlockpathcoldcaverns.tsmc2" speakertag="unlockpathnpc" invokertag="player" dialogtype="Regular" eventsprite="captain">
            <Option text="EventText.unlockpathcoldcaverns.tsmo1">
              <CheckMoneyAction amount="2000">
                <Success>
                  <MoneyAction amount="-2000" />
                  <UnlockPathAction />
                  <ConversationAction speakertag="unlockpathnpc" waitforinteraction="false" targettag="player" text="EventText.unlockpathcoldcaverns.tsmo1.tsmc1" eventsprite="captain" />
                </Success>
                <Failure>
                  <ConversationAction speakertag="unlockpathnpc" waitforinteraction="false" targettag="player" text="EventText.unlockpathcoldcaverns.tsmo1.nomoney" eventsprite="captain" />
                  <GoTo name="retry" />
                </Failure>
              </CheckMoneyAction>
            </Option>
            <Option text="EventText.unlockpath.refusebribe.tsm">
              <ConversationAction speakertag="unlockpathnpc" waitforinteraction="false" targettag="player" text="EventText.unlockpathcoldcaverns.tsmo2.tsmc1" eventsprite="captain" />
              <GoTo name="retry" />
            </Option>
          </ConversationAction>
        </Failure>
      </CheckReputationAction>
    </ScriptedEvent>
    
    <ScriptedEvent identifier="tsm_unlockpatheuropanridge" commonness="1" unlockpathevent="true" unlockpathtooltip="lockedpathtooltiptsmreputation" unlockpathreputation="40" faction="tsm" biome="europanridge">
      <SpawnAction npcsetidentifier="tsm_city_npcs" npcidentifier="tsm_caretakers" targettag="unlockpathnpc" spawnlocation="Outpost" spawnpointtag="unlockpath" />
      <CheckReputationAction targettype="faction" identifier="tsm" condition="gte 40">
        <Success>
          <ConversationAction text="EventText.unlockpatheuropanridge.tsmc1" speakertag="unlockpathnpc" dialogtype="Regular" />
          <UnlockPathAction />
        </Success>
        <Failure>
          <Label name="retry" />
          <ConversationAction text="EventText.unlockpatheuropanridge.tsmc2" speakertag="unlockpathnpc" invokertag="player" dialogtype="Regular" eventsprite="captain">
            <Option text="EventText.unlockpatheuropanridge.tsmo1">
              <CheckMoneyAction amount="4500">
                <Success>
                  <MoneyAction amount="-4500" />
                  <UnlockPathAction />
                  <ConversationAction speakertag="unlockpathnpc" waitforinteraction="false" targettag="player" text="EventText.unlockpatheuropanridge.tsmo1.tsmc1" eventsprite="captain" />
                </Success>
                <Failure>
                  <ConversationAction speakertag="unlockpathnpc" waitforinteraction="false" targettag="player" text="EventText.unlockpatheuropanridge.tsmo1.nomoney" eventsprite="captain" />
                  <GoTo name="retry" />
                </Failure>
              </CheckMoneyAction>
            </Option>
            <Option text="EventText.unlockpath.refusebribe.tsm">
              <ConversationAction speakertag="unlockpathnpc" waitforinteraction="false" targettag="player" text="EventText.unlockpatheuropanridge.tsmo2.tsmc1" eventsprite="captain" />
              <GoTo name="retry" />
            </Option>
          </ConversationAction>
        </Failure>
      </CheckReputationAction>
    </ScriptedEvent>
    
    <ScriptedEvent identifier="tsm_unlockpathaphoticplateau" commonness="1" unlockpathevent="true" unlockpathtooltip="lockedpathtooltiptsmreputation" unlockpathreputation="50" faction="tsm" biome="theaphoticplateau">
      <SpawnAction npcsetidentifier="tsm_city_npcs" npcidentifier="tsm_caretakers" targettag="unlockpathnpc" spawnlocation="Outpost" spawnpointtag="unlockpath" />
      <CheckReputationAction targettype="faction" identifier="tsm" condition="gte 50">
        <Success>
          <ConversationAction text="EventText.unlockpathaphoticplateau.tsmc1" speakertag="unlockpathnpc" dialogtype="Regular" />
          <UnlockPathAction />
        </Success>
        <Failure>
          <Label name="retry" />
          <ConversationAction text="EventText.unlockpathaphoticplateau.tsmc2" speakertag="unlockpathnpc" invokertag="player" dialogtype="Regular" eventsprite="captain">
            <Option text="EventText.unlockpathaphoticplateau.tsmo1">
              <CheckMoneyAction amount="9000">
                <Success>
                  <MoneyAction amount="-9000" />
                  <UnlockPathAction />
                  <ConversationAction speakertag="unlockpathnpc" waitforinteraction="false" targettag="player" text="EventText.unlockpathaphoticplateau.tsmo1.tsmc1" eventsprite="captain" />
                </Success>
                <Failure>
                  <ConversationAction speakertag="unlockpathnpc" waitforinteraction="false" targettag="player" text="EventText.unlockpathaphoticplateau.tsmo1.nomoney" eventsprite="captain" />
                  <GoTo name="retry" />
                </Failure>
              </CheckMoneyAction>
            </Option>
            <Option text="EventText.unlockpath.refusebribe.tsm">
              <ConversationAction speakertag="unlockpathnpc" waitforinteraction="false" targettag="player" text="EventText.unlockpathaphoticplateau.tsmo2.tsmc1" eventsprite="captain" />
              <GoTo name="retry" />
            </Option>
          </ConversationAction>
        </Failure>
      </CheckReputationAction>
    </ScriptedEvent>
    
    <ScriptedEvent identifier="tsm_unlockpathgreatsea" commonness="1" unlockpathevent="true" unlockpathtooltip="lockedpathtooltiptsmreputation" unlockpathreputation="75" faction="tsm" biome="thegreatsea">
      <SpawnAction npcsetidentifier="tsm_city_npcs" npcidentifier="tsm_caretakers" targettag="unlockpathnpc" spawnlocation="Outpost" spawnpointtag="unlockpath" />
      <CheckReputationAction targettype="faction" identifier="tsm" condition="gte 75">
        <Success>
          <ConversationAction text="EventText.unlockpathgreatsea.tsmc1" speakertag="unlockpathnpc" dialogtype="Regular" eventsprite="captain" />
          <UnlockPathAction />
        </Success>
        <Failure>
          <Label name="retry" />
          <ConversationAction text="EventText.unlockpathgreatsea.tsmc2" speakertag="unlockpathnpc" invokertag="player" dialogtype="Regular" eventsprite="captain">
            <Option text="EventText.unlockpathgreatsea.tsmo1">
              <CheckMoneyAction amount="17000">
                <Success>
                  <MoneyAction amount="-17000" />
                  <UnlockPathAction />
                  <ConversationAction speakertag="unlockpathnpc" waitforinteraction="false" targettag="player" text="EventText.unlockpathgreatsea.tsmo1.tsmc1" eventsprite="captain" />
                </Success>
                <Failure>
                  <ConversationAction speakertag="unlockpathnpc" waitforinteraction="false" targettag="player" text="EventText.unlockpathgreatsea.tsmo1.nomoney" eventsprite="captain" />
                  <GoTo name="retry" />
                </Failure>
              </CheckMoneyAction>
            </Option>
            <Option text="EventText.unlockpath.refusebribe.tsm">
              <ConversationAction speakertag="unlockpathnpc" waitforinteraction="false" targettag="player" text="EventText.unlockpathgreatsea.tsmo2.tsmc1" eventsprite="captain" />
              <GoTo name="retry" />
            </Option>
          </ConversationAction>
        </Failure>
      </CheckReputationAction>
    </ScriptedEvent>
  </EventPrefabs>
  <EventSet identifier="outposteventsTsm" leveltype="outpost" allowatstart="true" minleveldifficulty="0" maxleveldifficulty="100" chooserandom="true" ignorecooldown="true" eventcount="2" additive="true" commonness="100">
    <EventSet identifier="tsm_all_easy_20" minleveldifficulty="0" maxleveldifficulty="20" allowatstart="true" chooserandom="true" onceperoutpost="true" eventcount="1" locationtype="outpost,city,research,military,mine,colony,settlement,construction,camp,base,blockade,survey,excavation,study,lab,clinic,hospital,surgery,hydroponics,biosphere,nourishment,factory,shipyard,fusion">
      <ScriptedEvent identifier="tsm_offer_reward_1" commonness="100" />
    </EventSet>
    <EventSet identifier="tsm_all_easy_100" minleveldifficulty="20" maxleveldifficulty="100" allowatstart="true" chooserandom="true" onceperoutpost="true" eventcount="2" locationtype="outpost,city,research,military,mine,colony,settlement,construction,camp,base,blockade,survey,excavation,study,lab,clinic,hospital,surgery,hydroponics,biosphere,nourishment,factory,shipyard,fusion">
      <ScriptedEvent identifier="tsm_offer_reward_2" commonness="80" />
      <ScriptedEvent identifier="tsm_offer_reward_3" commonness="80" />
      <ScriptedEvent identifier="tsm_offer_reward_4" commonness="80" />
      <ScriptedEvent identifier="tsm_missionevent_jlp" commonness="40" />
    </EventSet>
    <EventSet identifier="tsm_city_100" minleveldifficulty="20" maxleveldifficulty="100" allowatstart="true" chooserandom="true" onceperoutpost="true" eventcount="2" locationtype="tsm_city,tsm_military,tsm_mine">
      <ScriptedEvent identifier="tsm_offer_reward_2" />
      <ScriptedEvent identifier="tsm_offer_reward_3" />
      <ScriptedEvent identifier="tsm_offer_reward_4" />
    </EventSet>
    <EventSet identifier="tsm_city_20" minleveldifficulty="0" maxleveldifficulty="20" allowatstart="true" chooserandom="true" onceperoutpost="true" eventcount="1" locationtype="tsm_city,tsm_military,tsm_mine">
      <ScriptedEvent identifier="tsm_offer_reward_1" commonness="90" />
      <ScriptedEvent identifier="tsm_missionevent_hxl" commonness="20" />
    </EventSet>
  </EventSet>
</Override>
</Randomevents>